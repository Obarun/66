<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="date" content="2020-05-08" scheme="YYYY-MM-DD" />
<meta name="author" content="Eric Vidal &lt;eric@obarun.org&gt;" />
<title>The 66 Suite: 66-env</title>
</head>
<body>

<p><a href="index.html">66</a></p>

<p><a href="https://web.obarun.org">obarun.org</a></p>

<h1 id="66-env">66-env</h1>

<p>Lists or replaces an environment variable of a service depending on the options passed.</p>

<h2 id="Interface">Interface</h2>

<pre><code>    66-env [ -h ] [ -z ] [ -v verbosity ] [ -t tree ] [ -d dir ] [ -L ] [ -e ] [ -r key=value ] service
</code></pre>

<ul>
<li><p>This program opens and reads the configuration file of <em>service</em> found by default at <code>%%service_admconf%%</code></p></li>
<li><p>It displays the contents of the file or replaces a <code>key=value</code> pair if instructed to do so with the <strong>‑r</strong> option.</p></li>
</ul>

<h2 id="Exit%20codes">Exit codes</h2>

<ul>
<li><em>0</em> success</li>
<li><em>100</em> wrong usage</li>
<li><em>111</em> system call failed</li>
</ul>

<h2 id="Options">Options</h2>

<ul>
<li><p><strong>-h</strong> : prints this help.</p></li>
<li><p><strong>-z</strong> : use color.</p></li>
<li><p><strong>-v</strong> <em>verbosity</em> : increases/decreases the verbosity of the command.</p>

<ul>
<li><em>1</em> : only print error messages. This is the default.</li>
<li><em>2</em> : also print warning messages.</li>
<li><em>3</em> : also print tracing messages.</li>
<li><em>4</em> : also print debugging messages.</li>
</ul></li>
<li><p><strong>-t</strong> : handles the <em>selection</em> of the given <em>tree</em>. This option is mandatory except if a tree was marked as &#8216;current&#39;—see <a href="66-tree.html">66-tree</a>.</p></li>
<li><p><strong>-d</strong> <em>dir</em> : use <em>dir</em> as configuration file directory instead of the default one.</p></li>
<li><p><strong>-L</strong> : list defined environment variables for service.</p></li>
<li><p><strong>-e</strong> : edit the configuration file with <code>EDITOR</code> set in your system environment</p></li>
<li><p><strong>-r</strong> <em>key=value</em> : override an existing <code>key=value</code> pair with the given one. The <code>key=value</code> needs to be single quoted in case of multiple arguments.</p></li>
</ul>

<h2 id="Usage%20examples">Usage examples</h2>

<pre><code>    66-env -L ntpd

    66-env -r CMD_ARGS=-d 

    66-env -r CMD_ARGS=&#39;-c /etc/nginx/nginx.conf -g &quot;daemon off;&quot;&#39;
</code></pre>

<h2 id="Notes">Notes</h2>

<p>Removing a <em>key</em> from the environment after the use can be handled by using an exclamation mark <code>!</code> at the begin of the value: </p>

<pre><code>    66-env -r CMD_ARGS=&#39;!-c /etc/nginx/nginx.conf -g &quot;daemon off;&quot;&#39;
</code></pre>
</body>
</html>
