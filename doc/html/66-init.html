<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="date" content="2020-05-08" scheme="YYYY-MM-DD" />
<meta name="author" content="Eric Vidal &lt;eric@obarun.org&gt;" />
<title>The 66 Suite: 66-init</title>
</head>
<body>

<p><a href="index.html">66</a></p>

<p><a href="https://web.obarun.org">obarun.org</a></p>

<h1 id="66-init">66-init</h1>

<p>This command initiates services from a given <em>tree</em> at a <em>live</em> directory. </p>

<h2 id="Interface">Interface</h2>

<pre><code>    66-init [ -h help ] [ -z ] [ -v verbosity ] [ -l live ] [ -t tree ] classic|database|both
</code></pre>

<p>This tool expects to find an already created <a href="66-scandir.html">scandir</a> directory at <em>live</em> location. The <a href="66-scandir.html">scandir</a> does not need to be necessarily running depending on the provided options. Administrators should invoke <em>66-init</em> only once.</p>

<h2 id="Exit%20codes">Exit codes</h2>

<ul>
<li><em>0</em> success</li>
<li><em>100</em> wrong usage</li>
<li><em>111</em> system call failed</li>
</ul>

<h2 id="Options">Options</h2>

<ul>
<li><p><strong>-h</strong> : prints this help.</p></li>
<li><p><strong>-z</strong> : use color.</p></li>
<li><p><strong>-v</strong> <em>verbosity</em> : increases/decreases the verbosity of the command.</p>

<ul>
<li><em>1</em> : only print error messages. This is the default.</li>
<li><em>2</em> : also print warning messages.</li>
<li><em>3</em> : also print tracing messages.</li>
<li><em>4</em> : also print debugging messages.</li>
</ul></li>
<li><p><strong>-l</strong> <em>live</em> : changes the supervision directory of <em>service</em> to <em>live</em>. By default this will be <code>%%livedir%%</code>. The default can also be changed at compile time by passing the <code>--livedir=live</code> option to <code>./configure</code>. An existing absolute path is expected and should be within a writable filesystem - likely a RAM filesystem—see <a href="66-scandir.html">66-scandir</a>.</p></li>
</ul>

<h2 id="Arguments">Arguments</h2>

<ul>
<li><p><strong>classic</strong> : only initiate all <code>classic</code> services from <em>tree</em> at <em>live</em> location. </p></li>
<li><p><strong>datatabe</strong> : only initiate all <code>bundle</code> and <code>atomic</code> services from <em>tree</em> at <em>live</em> location. </p></li>
<li><p><strong>both</strong> : initiate all <code>classic</code> services and all <code>bundle</code> and <code>atomic</code> services from <em>tree</em> at <em>live</em> location. </p></li>
</ul>

<h2 id="Initialization%20process">Initialization process</h2>

<p>The tool will make an exact copy of all <code>classic</code> service files and directories of the <em>tree</em> inside a <a href="66-scandir.html">scandir</a> directory at <em>live</em>. By default <code>%%livedir%%/scandir/UID</code> is created if it does not exist yet, where <em>UID</em> is the uid of the current owner of the process. The <a href="66-scandir.html">scandir</a> does not need to be necessarily running. This is useful at boot time to initiate an early service before starting the scandir. Once the <a href="66-scandir.html">scandir</a> starts—see <a href="66-scandir.html">66-scandir -u</a> option, the already present services start automatically.</p>

<p>If the <a href="66-scandir.html">scandir</a> is running, you should invoke a <a href="66-scanctl.html">66-scanctl reload</a> command to inform it about the changes.</p>

<h2 id="Bundle,%20atomic%20services">Bundle, atomic services</h2>

<p>The tool will automatically invoke <a href="https://skarnet.org/software/s6-rc/s6-rc-init.html">s6-rc-init -l live -c compiled -p prefix</a>, where, by default, <em>live</em> translates to <code>%%livedir%%/tree/UID/tree</code> and compiled to <code>%%system_dir%%/66/system/tree/servicedirs/db/tree</code> or <code>$HOME/%%user_dir%%/system/tree/servicedirs/db/tree</code> depending on the owner of the process and the <em>prefix</em> of the name of the <em>tree</em>. If it doesn&#8217;t exist yet <em>live</em> is created in the process. For these services the <a href="66-scandir.html">scandir</a> <strong>must be</strong> running. This tool like any other <em>66</em> tool can be invoked with user permissions.</p>
</body>
</html>
