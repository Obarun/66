<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="date" content="2020-05-08" scheme="YYYY-MM-DD" />
<meta name="author" content="Eric Vidal &lt;eric@obarun.org&gt;" />
<title>The 66 Suite: 66-inservice</title>
</head>
<body>

<p><a href="index.html">66</a></p>

<p><a href="https://web.obarun.org">obarun.org</a></p>

<h1 id="66-inservice">66-inservice</h1>

<p>This command displays information about services.</p>

<h2 id="Interface">Interface</h2>

<pre><code>    66-inservice [ -h ] [ -z ] [ -v verbosity ] [ -n ] [ -o name,intree,status,... ] [ -g ] [ -d depth ] [ -r ] [ -t tree ] [ -p nline ] service
</code></pre>

<h2 id="Exit%20codes">Exit codes</h2>

<ul>
<li><em>0</em> success</li>
<li><em>100</em> wrong usage</li>
<li><em>111</em> system call failed</li>
</ul>

<h2 id="Options">Options</h2>

<ul>
<li><p><strong>-h</strong> : prints this help.</p></li>
<li><p><strong>-z</strong> : use color.</p></li>
<li><p><strong>-v</strong> <em>verbosity</em> : increases/decreases the verbosity of the command.</p>

<ul>
<li><em>1</em> : only print error messages. This is the default.</li>
<li><em>2</em> : also print warning messages.</li>
<li><em>3</em> : also print tracing messages.</li>
<li><em>4</em> : also print debugging messages.</li>
</ul></li>
<li><p><strong>-n</strong> : do not display the field name(s) specified.</p></li>
<li><p><strong>-o</strong> : comma separated list of fields to display. If this option is not passed, <em>66-inservice</em> will display all fields.</p></li>
<li><p><strong>-g</strong> : shows the dependency list of the <em>service</em> as a hierarchical graph instead of a list.</p></li>
<li><p><strong>-d</strong> <em>depth</em> : limits the depth of the dependency list visualisation; default is 1. This implies <strong>-g</strong> option. </p></li>
<li><p><strong>-r</strong> : shows the dependency list of <em>services</em> in reverse mode.</p></li>
<li><p><strong>-t</strong> <em>tree</em> : only searches the <em>service</em> at the specified <em>tree</em>, when the same service may be enabled in more trees.</p></li>
<li><p><strong>-p</strong> <em>nline</em> : prints the <em>nline</em> last lines from the log file of the <em>service</em>. Default is 20. </p></li>
</ul>

<h2 id="Valid%20fields%20for%20-o%20options">Valid fields for -o options</h2>

<ul>
<li><em>name</em> : displays the name of the <em>service</em>.</li>
<li><em>intree</em> : displays the <em>service</em>&#8217;s tree name.</li>
<li><em>status</em> : displays the status.</li>
<li><em>type</em> : displays the <em>service</em> type.</li>
<li><em>description</em> : displays the description.</li>
<li><em>source</em> : displays the source of the <em>service</em>&#8217;s <a href="frontend.html">frontend</a> file.</li>
<li><em>live</em> : displays the <em>service</em>&#8217;s live directory.</li>
<li><em>depends</em> : displays the <em>service</em>&#8217;s dependencies.</li>
<li><em>extdepends</em> : displays the <em>service</em>&#8217;s external dependencies.</li>
<li><em>optsdepends</em> : displays the <em>service</em>&#8217;s optional dependencies.</li>
<li><em>start</em> : displays the <em>service</em>&#8217;s start script.</li>
<li><em>stop</em> : displays the <em>service</em>&#8217;s stop script.</li>
<li><em>envat</em> : displays the source of the environment file.</li>
<li><em>envfile</em> : displays the contents of the environment file.</li>
<li><em>logname</em> : displays the logger&#8217;s name.</li>
<li><em>logdst</em> : displays the logger&#8217;s destination.</li>
<li><em>logfile</em> : displays the contents of the log file.</li>
</ul>

<h2 id="Command%20and%20output%20examples">Command and output examples</h2>

<p>The command <code>66-inservice 00</code> run as root user on <a href="https://web.obarun.org">Obarun</a>&#8217;s default system, displays the following, where <em>00</em> is a service contained in the tree boot: </p>

<pre><code>    Name                  : 00
    In tree               : boot
    Status                : enabled, nothing to display
    Type                  : bundle
    Description           : Set the hostname and mount filesystem
    Source                : %%service_system%%/boot/mount/00
    Live                  : %%livedir%%/tree/0/boot/servicedirs/00
    Dependencies          : system-hostname  mount-run  populate-run  mount-tmp  populate-tmp  mount-proc  mount-sys
                            populate-sys  mount-dev  mount-pts  mount-shm  populate-dev  mount-cgroups
    External dependencies : None
    Optional dependencies : None
    Start script          : None
    Stop script           : None
    Environment source    : None
    Environment file      : None
    Log name              : None
    Log destination       : None
    Log file              : None
</code></pre>

<p><strong><em>Note</em></strong>: the <em>Optional dependencies</em> and <em>External dependencies</em> also displays the name of the tree where the service is currently enabled after the <code>colon(:)</code> mark if any:</p>

<pre><code>    External dependencies : dbus-session@obarun:base gvfsd:desktop
    Optional dependencies : picom@obarun:desktop
</code></pre>

<p>By default the dependency graph is rendered in the order of execution. In this example the <code>oneshot</code> system-hostname is the first executed service and <code>oneshot</code> <em>mount-cgroups</em> is the last one when it finishes. You can reverse the rendered order with the <strong>-r</strong> option.</p>

<p>You can display the <em>status</em> and <em>depends on</em> field and only these fields of a <em>service</em> using the command <code>66-inservice -o status,depends -g &lt;service&gt;</code> connmand where the dependency list is diplayed as a graph:</p>

<pre><code>    Status             : enabled, up (pid 938) 34652 seconds
    Dependencies       : /
                         ├─(933,Enabled,longrun) dbus
                         └─(929,Enabled,longrun) connmand-log
</code></pre>

<p>You can display the status,log file and log destination and only these fields of a service using the command <code>66-inservice -o status,logdst,logfile -g dbus</code>:</p>

<pre><code>    Status             : enabled, up (pid 933) 34852 seconds, ready 34852 seconds
    Log destination    : %%system_log%%/dbus
    Log file           :
    2019-10-03 16:16:05.246991500  dbus-daemon[933]: [system] Rejected send message, 4 matched rules; type=&quot;method_call&quot;, sender=&quot;:1.3&quot; (uid=1000 pid=1226 comm=&quot;connman-gtk --tray &quot;) interface=&quot;net.connman.Technology&quot; member=&quot;Scan&quot; error name=&quot;(unset)&quot; requested_reply=&quot;0&quot; destination=&quot;:1.0&quot; (uid=0 pid=938 comm=&quot;connmand -n --nobacktrace --nodnsproxy &quot;)
    2019-10-03 16:16:35.256146500  dbus-daemon[933]: [system] Rejected send message, 4 matched rules; type=&quot;method_call&quot;, sender=&quot;:1.3&quot; (uid=1000 pid=1226 comm=&quot;connman-gtk --tray &quot;) interface=&quot;net.connman.Technology&quot; member=&quot;Scan&quot; error name=&quot;(unset)&quot; requested_reply=&quot;0&quot; destination=&quot;:1.0&quot; (uid=0 pid=938 comm=&quot;connmand -n --nobacktrace --nodnsproxy &quot;)
</code></pre>
</body>
</html>
