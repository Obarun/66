<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="date" content="2020-05-08" scheme="YYYY-MM-DD" />
<meta name="author" content="Eric Vidal &lt;eric@obarun.org&gt;" />
<title>The 66 Suite: 66-parser</title>
</head>
<body>

<p><a href="index.html">66</a></p>

<p><a href="https://web.obarun.org">obarun.org</a></p>

<h1 id="66-parser">66-parser</h1>

<p>Parses a <a href="frontend.html">frontend</a> service file and writes the result to a directory.</p>

<h2 id="Interface">Interface</h2>

<pre><code>    66-parser [ -h ] [ -z ] [ -v verbosity ] [ -f ] [ -c|m|C ] service destination
</code></pre>

<ul>
<li>Opens and reads the <a href="frontend.html">frontend</a> <em>service</em> file.</li>
<li>Runs a parser on the file.</li>
<li>Writes the parsing result to the <em>destination</em> directory.</li>
</ul>

<p>An absolute path is expected for either <em>service</em> and <em>destination</em>. </p>

<h2 id="Exit%20codes">Exit codes</h2>

<ul>
<li><em>0</em> success</li>
<li><em>100</em> wrong usage</li>
<li><em>111</em> system call failed</li>
</ul>

<h2 id="Options">Options</h2>

<ul>
<li><p><strong>-h</strong> : prints this help.</p></li>
<li><p><strong>-z</strong> : use color.</p></li>
<li><p><strong>-v</strong> <em>verbosity</em> : increases/decreases the verbosity of the command.</p>

<ul>
<li><em>1</em> : only print error messages. This is the default.</li>
<li><em>2</em> : also print warning messages.</li>
<li><em>3</em> : also print tracing messages.</li>
<li><em>4</em> : also print debugging messages.</li>
</ul></li>
<li><p><strong>-l</strong> <em>live</em> : changes the supervision directory of <em>service</em> to <em>live</em>. By default this will be <code>%%livedir%%</code>. The default can also be changed at compile time by passing the <code>--livedir=live</code> option to <code>./configure</code>. An existing absolute path is expected and should be within a writable filesystem - likely a RAM filesystem—see <a href="66-scandir.html">66-scandir</a>.</p></li>
<li><p><strong>-f</strong> : force. Owerwrite an existing parsing result at <em>destination</em>.</p></li>
<li><p><strong>-c</strong> : only appends new <code>key=value</code> pairs to the environment configuration file from <a href="frontend.html">frontend</a> file.</p></li>
<li><p><strong>-m</strong> : appends new <code>key=value</code> and merges existing one to the environment configuration file from <a href="frontend.html">frontend</a> file.</p></li>
<li><p><strong>-C</strong> : overwrite it environment configuration file from <a href="frontend.html">frontend</a> file.</p></li>
</ul>

<h2 id="Notes">Notes</h2>

<p><em>66-parser</em> will not try to read and parse any services declared under the <code>@contents</code>, <code>@depends</code>, <code>@optsdepends</code> or <code>@extdepends</code> key of the given <a href="frontend.html">frontend</a> file even for a service <code>module</code> type. This tool is mainly intended for debugging purposes and to see the result of a parsing process before actually enabling the service on the system. The tool uses the exact same parser as <a href="66-enable.html">66‑enable</a> which by default writes the configuration file to <code>%%service_admconf%%/service_name</code>. As a consequence any corresponding existing file will be overwritten. To avoid this, it writes the configuration file to the <em>destination/env/</em> directory and adjust the resulting <em>run/finish</em> file to match the configuration file path. </p>
</body>
</html>
