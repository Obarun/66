<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="date" content="2020-05-08" scheme="YYYY-MM-DD" />
<meta name="author" content="Eric Vidal &lt;eric@obarun.org&gt;" />
<title>The 66 Suite: 66-scanctl</title>
</head>
<body>

<p><a href="index.html">66</a></p>

<p><a href="https://web.obarun.org">obarun.org</a></p>

<h1 id="66-scanctl">66-scanctl</h1>

<p>Sends a <em>signal</em> to a scandir. Safe wrapper around <a href="https://skarnet.org/software/s6/s6-svscanctl.html">s6‑svscanctl</a>. </p>

<h2 id="Interface">Interface</h2>

<pre><code>    66-scanctl [ -h ] [ -z ] [ -v verbosity ] [ -l live ] [ -o owner ] signal
</code></pre>

<p>This program sends a <em>signal</em> to an already running <a href="scandir.html">scandir</a> at <em>live</em> where by default <em>live</em> is at <code>%%livedir%%</code> or the resulting path provided by the <strong>‑l</strong> option. If owner is not explicitely set with <strong>‑o</strong> then the user of the current process will be used instead.</p>

<h2 id="Exit%20codes">Exit codes</h2>

<ul>
<li><em>0</em> success</li>
<li><em>100</em> wrong usage</li>
<li><em>111</em> system call failed</li>
</ul>

<h2 id="Options">Options</h2>

<ul>
<li><p><strong>-h</strong> : prints this help.</p></li>
<li><p><strong>-z</strong> : use color.</p></li>
<li><p><strong>-v</strong> <em>verbosity</em> : increases/decreases the verbosity of the command.</p>

<ul>
<li><em>1</em> : only print error messages. This is the default.</li>
<li><em>2</em> : also print warning messages.</li>
<li><em>3</em> : also print tracing messages.</li>
<li><em>4</em> : also print debugging messages.</li>
</ul></li>
<li><p><strong>-l</strong> <em>live</em> : changes the supervision directory of <em>service</em> to <em>live</em>. By default this will be <code>%%livedir%%</code>. The default can also be changed at compile time by passing the <code>--livedir=live</code> option to <code>./configure</code>. An existing absolute path is expected and should be within a writable filesystem - likely a RAM filesystem—see <a href="66-scandir.html">66-scandir</a>.</p></li>
<li><p><strong>-o</strong> <em>owner</em> : send the <em>signal</em> to a <a href="66-scandir.html">scandir</a> owned by <em>owner</em> instead of the current owner of the process. <em>owner</em> needs adecuate permissions to deal with the scandir.</p></li>
</ul>

<h2 id="Signal">Signal</h2>

<p>Any signal accepted by <a href="https://skarnet.org/software/s6/s6-svscanctl.html">s6‑svscanctl</a> can be passed but without the dash <code>‑</code> character. As a result if you wanted to send a <strong>‑t</strong> signal, you need to use: <code>66‑scanctl t</code>. Further a series of commands is also accepted in the same way: <code>66‑scanctl st</code>. A few convenient keywords were added to avoid having to remember basic and useful commands:</p>

<ul>
<li><em>reload</em>    = ‑an</li>
<li><em>interrupt</em> = ‑i</li>
<li><em>quit</em>      = ‑q</li>
<li><em>halt</em>      = ‑0</li>
<li><em>reboot</em>    = ‑6</li>
<li><em>poweroff</em>  = ‑7</li>
</ul>

<h2 id="Usage%20examples">Usage examples</h2>

<pre><code>    66-scanctl reload
</code></pre>

<p>Updates the process supervision tree to exactly match the services listed in <a href="66-scandir.html">scandir</a>.
This command is strictly equal to:</p>

<pre><code>    s6-svscanctl -an /path_to_scandir
</code></pre>
</body>
</html>
